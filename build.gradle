def version = '1.0.0'
def groupOne = '$1'

task goBuild(type: Exec) {
    workingDir '.'

    commandLine 'cmd', '/c', "go build -o ${rootProject.name}.exe"
}

task copyPlugin(type: Copy) {
    dependsOn 'goBuild'

    from "${rootProject.name}.exe"
    into "${System.env.APPDATA}\\terraform.d\\plugins"
    rename '(.*)\\.exe', "${groupOne}_v${version}.exe"
}
